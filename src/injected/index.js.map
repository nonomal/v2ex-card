{"version":3,"file":"index.js","sources":["../../node_modules/_@babel_runtime@7.11.2@@babel/runtime/helpers/arrayLikeToArray.js","../../node_modules/_@babel_runtime@7.11.2@@babel/runtime/helpers/arrayWithoutHoles.js","../../node_modules/_@babel_runtime@7.11.2@@babel/runtime/helpers/iterableToArray.js","../../node_modules/_@babel_runtime@7.11.2@@babel/runtime/helpers/unsupportedIterableToArray.js","../../node_modules/_@babel_runtime@7.11.2@@babel/runtime/helpers/nonIterableSpread.js","../../node_modules/_@babel_runtime@7.11.2@@babel/runtime/helpers/toConsumableArray.js","../../node_modules/_@babel_runtime@7.11.2@@babel/runtime/helpers/classCallCheck.js","../../node_modules/_@babel_runtime@7.11.2@@babel/runtime/helpers/createClass.js","../share/index.js","dev/index.js"],"sourcesContent":["function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","export function sleep(ms = 0) {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\nexport function addClass(target, className) {\n    return target.classList.add(className);\n}\n\nexport function removeClass(target, className) {\n    return target.classList.remove(className);\n}\n","import './index.scss';\nimport { addClass, removeClass } from '../../share';\n\nclass Injected {\n    constructor() {\n        this.$card = null;\n        this.timeout = null;\n        this.infoCache = {};\n        this.current = null;\n        this.domParser = new DOMParser();\n        document.body.addEventListener('mousemove', this.onMouseMove.bind(this));\n        window.addEventListener('scroll', this.onScroll.bind(this));\n    }\n\n    onMouseMove(event) {\n        const memberUrl = this.getMemberUrl(event);\n        if (memberUrl) {\n            this.getMemberInfo(memberUrl)\n                .then((memberInfo) => {\n                    this.render(event, memberUrl, memberInfo);\n                })\n                .catch((err) => {\n                    console.warn(err);\n                });\n        } else if (this.$card && !event.composedPath().includes(this.$card)) {\n            addClass(this.$card, 'vc-hide');\n        }\n    }\n\n    onScroll() {\n        if (this.$card) {\n            addClass(this.$card, 'vc-hide');\n        }\n    }\n\n    getMemberUrl(event) {\n        const $el = event.target;\n        const reg = /^\\/member\\//;\n        if ($el.tagName === 'A' && reg.test($el.pathname || '')) {\n            return $el.pathname;\n        }\n        if ($el.parentElement && $el.parentElement.tagName === 'A' && reg.test($el.parentElement.pathname || '')) {\n            return $el.parentElement.pathname;\n        }\n        if ($el.tagName === 'IMG' && $el.className === 'avatar' && $el.alt) {\n            return `/member/${$el.alt}`;\n        }\n        return null;\n    }\n\n    getInfoFromText(text) {\n        const dom = this.domParser.parseFromString(text, 'text/html');\n        const $avatar = dom.querySelector('.avatar');\n        const $summary = dom.querySelector('#Main .box .gray');\n        const name = $avatar.alt;\n        const avatar = $avatar.src;\n        const online = !!dom.querySelector('#Main .box .online');\n        const joinRank = $summary.textContent.match(/\\s(\\d+)\\s/)[1];\n        const joinTime = $summary.textContent.match(/\\s(\\d{4}-.*\\+08:00)/)[1];\n        const $activity = $summary.querySelector('a');\n        const activityRank = $activity ? $activity.textContent : '';\n        const $socials = [...dom.querySelectorAll('#Main .box .widgets a')];\n        const socials = $socials.map(($item) => {\n            const $img = $item.querySelector('img');\n            return {\n                href: $item.href,\n                img: $img ? $img.src : '',\n                name: $item.textContent.trim(),\n            };\n        });\n        const $topic = [...dom.querySelectorAll('#Main .box .topic-link')];\n        const topics = $topic.map(($item) => {\n            return {\n                href: $item.href,\n                title: $item.textContent.trim(),\n            };\n        });\n\n        const follow = {\n            value: 'Follow',\n            onclick: `location.href = '/signin'`,\n        };\n        const block = {\n            value: 'Block',\n            onclick: `location.href = '/signin'`,\n        };\n        const $function = dom.querySelectorAll('#Main [type=\"button\"]');\n        if ($function.length === 2) {\n            const $follow = $function[0];\n            follow.value = $follow.value === '取消特别关注' ? 'Unfollow' : 'Follow';\n            follow.onclick = $follow.getAttribute('onclick');\n            const $block = $function[1];\n            block.value = $block.value;\n            block.onclick = $block.getAttribute('onclick');\n        }\n\n        return {\n            name,\n            avatar,\n            online,\n            joinRank,\n            joinTime,\n            activityRank,\n            socials,\n            topics,\n            follow,\n            block,\n        };\n    }\n\n    getMemberInfo(memberUrl) {\n        if (this.infoCache[memberUrl]) {\n            return Promise.resolve(this.infoCache[memberUrl]);\n        }\n\n        clearTimeout(this.timeout);\n        return new Promise((resolve) => {\n            this.timeout = setTimeout(() => {\n                fetch(memberUrl)\n                    .then((res) => res.text())\n                    .then((text) => {\n                        this.infoCache[memberUrl] = this.getInfoFromText(text);\n                        resolve(this.infoCache[memberUrl]);\n                    });\n            }, 200);\n        });\n    }\n\n    getPosFromEvent(event) {\n        const $el = event.target;\n        const { clientWidth } = this.$card;\n        const { x, y, width, height } = $el.getBoundingClientRect();\n        const left = x + width - clientWidth / 2 - width / 2;\n        const top = y + height;\n        return {\n            left,\n            top,\n        };\n    }\n\n    render(event, url, info) {\n        if (!this.$card) {\n            this.$card = document.createElement('div');\n            this.$card.className = 'v2ex-card';\n            document.body.appendChild(this.$card);\n        }\n\n        removeClass(this.$card, 'vc-hide');\n\n        const { left, top } = this.getPosFromEvent(event);\n        this.$card.style.left = `${left}px`;\n        this.$card.style.top = `${top}px`;\n\n        if (url === this.current) return;\n        this.current = url;\n\n        this.$card.innerHTML = `\n            <div class=\"vc-inner\">\n                <div class=\"vc-header\">\n                    <div class=\"vc-avatar\">\n                        <img src=\"${info.avatar}\" alt=\"${info.name}\" width=\"48\" height=\"48\" />\n                    </div>\n                    <div class=\"vc-info\">\n                        <div class=\"vc-row\">\n                            <span class=\"vc-name\">${info.name}</span>\n                            ${info.online ? '<span class=\"vc-online\">online</span>' : ''}\n                        </div>\n                        <div class=\"vc-row\">\n                            <span class=\"vc-join-rank\">No.${info.joinRank}</span>\n                            <span class=\"vc-activity-rank ${info.activityRank ? '' : `vc-hide`}\">\n                                Active Today: ${info.activityRank}\n                            </span>\n                        </div>\n                        <div class=\"vc-row\">\n                            Join: ${info.joinTime}\n                        </div>\n                    </div>\n                </div>\n                <div class=\"vc-function\">\n                    <div class=\"vc-item\" onclick=\"${info.follow.onclick}\">\n                        ${info.follow.value}\n                    </div>\n                    <div class=\"vc-item\" onclick=\"${info.block.onclick}\">\n                        ${info.block.value}\n                    </div>\n                </div>\n                <div class=\"vc-socials ${info.socials.length ? '' : `vc-hide`}\">\n                    ${info.socials\n                        .map((item) => {\n                            return `<a href=\"${item.href}\" title=\"${item.name}\" target=\"_blank\"><img src=\"${item.img}\" alt=\"${info.name}\"  width=\"16\" height=\"16\"/>${item.name}</a>`;\n                        })\n                        .join('')}\n                </div>\n                <div class=\"vc-topics ${info.topics.length ? '' : `vc-hide`}\">\n                    ${info.topics\n                        .slice(0, 5)\n                        .map((item) => `<a href=\"${item.href}\" title=\"${item.title}\">${item.title}</a>`)\n                        .join('')}\n                </div>\n            </div>\n        `;\n    }\n}\n\nexport default new Injected();\n"],"names":["addClass","target","className","classList","add","removeClass","remove","Injected","$card","timeout","infoCache","current","domParser","DOMParser","document","body","addEventListener","onMouseMove","bind","window","onScroll","event","memberUrl","getMemberUrl","getMemberInfo","then","memberInfo","render","err","console","warn","composedPath","includes","$el","reg","tagName","test","pathname","parentElement","alt","text","dom","parseFromString","$avatar","querySelector","$summary","name","avatar","src","online","joinRank","textContent","match","joinTime","$activity","activityRank","$socials","querySelectorAll","socials","map","$item","$img","href","img","trim","$topic","topics","title","follow","value","onclick","block","$function","length","$follow","getAttribute","$block","Promise","resolve","clearTimeout","setTimeout","fetch","res","getInfoFromText","clientWidth","getBoundingClientRect","x","y","width","height","left","top","url","info","createElement","appendChild","getPosFromEvent","style","innerHTML","item","join","slice"],"mappings":"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"}